{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","components/SearchForm/SearchForm.jsx","pages/MoviesPage/MoviesPage.jsx","apiService/apiService.js","components/MovieCard/MovieCard.jsx","components/MovieCard/MovieCard.module.css","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","components/SearchForm/SearchForm.module.css","pages/MoviesPage/MoviesPage.module.css"],"names":["_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","SearchForm","onSearch","onSubmit","e","preventDefault","target","elements","searchImage","value","className","s","type","button","SearchForm_input","name","autoComplete","autoFocus","placeholder","MoviePage","history","useHistory","location","useLocation","useState","searchMovie","setSearchMovie","movies","setMovies","page","setPage","reqStatus","setReqStatus","useEffect","a","movieApi","length","Error","prevState","toast","error","onFetchMovie","window","scrollTo","top","document","documentElement","scrollHeight","behavior","reset","Container","push","search","gallery","map","movie","card__item","link","to","pathname","id","state","MovieCard","axios","defaults","baseURL","autKey","fetchTrendingMovies","get","response","data","results","fetchSearchMovie","fetchMovieId","fullInfo","fetchMovieReviews","reviews","console","log","fetchMovieCast","cast","poster","releaseYear","release_date","slice","card__thumb","card__photo","src","poster_path","alt","title","width","height","card__info","card__title","card__data","module","exports","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread2","i","arguments","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty"],"mappings":"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","file":"static/js/4.95002e69.chunk.js","sourcesContent":["import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import s from './SearchForm.module.css';\r\n\r\nexport default function SearchForm({ onSearch }) {\r\n  const handleSearch = e => {\r\n    e.preventDefault();\r\n    onSearch(e.target.elements.searchImage.value);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSearch} className={s.SearchForm}>\r\n      <button type=\"submit\" className={s.button}>\r\n        Search\r\n      </button>\r\n      <input\r\n        className={s.SearchForm_input}\r\n        type=\"text\"\r\n        name=\"searchImage\"\r\n        autoComplete=\"off\"\r\n        autoFocus\r\n        placeholder=\"Search movie\"\r\n      />\r\n    </form>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { Link, useLocation, useHistory } from 'react-router-dom';\r\n\r\nimport { toast } from 'react-hot-toast';\r\nimport * as movieApi from 'apiService/apiService';\r\nimport { Spinner } from 'components/Loader/Loader';\r\nimport Container from 'components/Container/Container';\r\nimport SearchForm from 'components/SearchForm/SearchForm';\r\nimport MovieCard from 'components/MovieCard/MovieCard';\r\nimport s from './MoviesPage.module.css';\r\n\r\nexport default function MoviePage() {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const [searchMovie, setSearchMovie] = useState(null);\r\n  const [movies, setMovies] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [reqStatus, setReqStatus] = useState('idle');\r\n\r\n  useEffect(() => {\r\n    if (!searchMovie) {\r\n      return;\r\n    }\r\n    async function onFetchMovie() {\r\n      try {\r\n        setReqStatus('pending');\r\n\r\n        const movies = await movieApi.fetchSearchMovie(searchMovie, page);\r\n\r\n        if (!movies.length) {\r\n          throw new Error();\r\n        }\r\n\r\n        setMovies(prevState => [...prevState, ...movies]);\r\n        setReqStatus('resolved');\r\n      } catch (err) {\r\n        setReqStatus('rejected');\r\n        toast.error('Not found');\r\n      }\r\n    }\r\n    onFetchMovie();\r\n\r\n    page > 1 &&\r\n      window.scrollTo({\r\n        top: document.documentElement.scrollHeight,\r\n        behavior: 'smooth',\r\n      });\r\n  }, [page, searchMovie]);\r\n\r\n  const handleSearchChange = searchMovie => {\r\n    reset();\r\n    setSearchMovie(searchMovie);\r\n\r\n    history.push({\r\n      ...location,\r\n      search: `query=${searchMovie}`,\r\n    });\r\n  };\r\n\r\n  const reset = () => {\r\n    setSearchMovie(null);\r\n    setMovies([]);\r\n    setPage(1);\r\n    setReqStatus('idle');\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <SearchForm onSearch={handleSearchChange} />\r\n      {reqStatus === 'pending' && <Spinner />}\r\n\r\n      {movies && (\r\n        <ul className={s.gallery}>\r\n          {movies.map(movie => (\r\n            <li key={movie.id} className={s.card__item}>\r\n              <Link\r\n                className={s.link}\r\n                to={{\r\n                  pathname: `/movies/${movie.id}`,\r\n                  state: { from: location },\r\n                }}\r\n              >\r\n                <MovieCard movie={movie} />\r\n              </Link>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n","import axios from 'axios';\r\n\r\naxios.defaults.baseURL = 'https://api.themoviedb.org/3';\r\nconst autKey = 'e46b87edbe0418b9678f5579382a8e13';\r\n\r\nexport const fetchTrendingMovies = async () => {\r\n  const response = await axios.get(`/trending/movie/week?api_key=${autKey}`);\r\n  const movies = response.data.results;\r\n\r\n  return movies;\r\n};\r\n\r\nexport const fetchSearchMovie = async (searchMovie, page) => {\r\n  const response = await axios.get(\r\n    `/search/movie?api_key=${autKey}&query=${searchMovie}&page=${page}&language=en-US`,\r\n  );\r\n  const movies = response.data.results;\r\n  return movies;\r\n};\r\n\r\nexport const fetchMovieId = async id => {\r\n  const response = await axios.get(\r\n    `/movie/${id}?api_key=${autKey}&language=en-US`,\r\n  );\r\n  const fullInfo = response.data;\r\n\r\n  return fullInfo;\r\n};\r\n\r\nexport const fetchMovieReviews = async id => {\r\n  const response = await axios.get(\r\n    `/movie/${id}/reviews?api_key=${autKey}&language=en-US`,\r\n  );\r\n  const reviews = response.data.results;\r\n  console.log(reviews);\r\n\r\n  return reviews;\r\n};\r\n\r\nexport const fetchMovieCast = async id => {\r\n  const response = await axios.get(\r\n    `/movie/${id}/credits?api_key=${autKey}&language=en-US`,\r\n  );\r\n  const cast = response.data.cast;\r\n\r\n  return cast;\r\n};\r\n\r\nexport const poster = 'https://image.tmdb.org/t/p/w500';\r\n","import PropTypes from 'prop-types';\r\nimport * as movieApi from 'apiService/apiService';\r\nimport s from './MovieCard.module.css';\r\n\r\nexport default function MovieCard({ movie }) {\r\n  const releaseYear = movie.release_date.slice(0, 4);\r\n  return (\r\n    <div key={movie.id}>\r\n      <div className={s.card__thumb}>\r\n        <img\r\n          className={s.card__photo}\r\n          src={movieApi.poster + movie.poster_path}\r\n          alt={movie.title}\r\n          width=\"280\"\r\n          height=\"402\"\r\n        />\r\n      </div>\r\n      <div className={s.card__info}>\r\n        <h2 className={s.card__title}>{movie.title}</h2>\r\n        <p className={s.card__data}>{releaseYear}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nMovieCard.propTypes = {\r\n  movie: PropTypes.object.isRequired,\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card__photo\":\"MovieCard_card__photo__25KYP\",\"card__thumb\":\"MovieCard_card__thumb__1VRvw\",\"card__info\":\"MovieCard_card__info__3ajkY\",\"card__title\":\"MovieCard_card__title__3jX7K\",\"card__data\":\"MovieCard_card__data__2CfX3\"};","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchForm\":\"SearchForm_SearchForm__1uGHd\",\"button\":\"SearchForm_button__1Tohj\",\"SearchForm_input\":\"SearchForm_SearchForm_input__1KKKk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"MoviesPage_gallery__1dD48\",\"card__item\":\"MoviesPage_card__item__3vZxx\",\"link\":\"MoviesPage_link__3L7wG\",\"title\":\"MoviesPage_title__2kyxK\"};"],"sourceRoot":""}